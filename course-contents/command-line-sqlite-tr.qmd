# Komut satırı SQLite

## SQLite

- Ubuntu gibi bir çok linux kurulumunda yüklü olarak gelir.

- Macintosh'ta eski bir sürümü vardır.
Güncellenmesi tavsiye edilir.
brew kullanılarak kurulması tavsiye edilir.
Ama eğer istenirse, aşağıdaki siteden yüklenebilir.

> brew install sqlite

- Windows'ta scoop kullanılarak kurulması tavsiye edilir. 
Ama eğer istenirse, aşağıdaki siteden yüklenebilir.

> scoop install sqlite 

[sqlite3](https://www.sqlite.org/cli.html)


## SQLite Komut satırı Demo

1. Chinook veri tabanı aç
2. .tables ile tabloları göster
3. Tablolardan SELECT ile bilgi almayı göster
4. .headers on ile kolon isimlerin göster veya gösterme
5. .mode ile SELECT çıktısını farklılaştırmayı göster
6. .output ile dosya ortamına SELECT ile aktarım yap
7. .schema ile tablo oluşturma betiklerin göster
8. .dump ile veri tabanı tam kopyalamayı göster
9. .read ile SQL komutu çalıştırmayı göster.



## SQLite Komut satırı komutları


- **.exit**
- **.quit**
- **.q**

Komut satırından çıkış.

- **.version**

Versiyon bilgisi, özellikle bazı komutlar çalışmadığı zaman ilk kontrol edilmesi gereken bilgi.

- **.show**

Çok kullanılan bazı özelliklerin değerlerini gösterir.
En önemli bağlı bulunduğunu veritabanı dosyasınıda gösterir.

- **.headers**

select komutunda başlıkların çıktısını kontrol eder.

```sql
SELECT * FROM Employee;
.headers on
SELECT * FROM Employee;
```

```bash
SELECT * FROM Employee;
.headers on
SELECT * FROM Employee;
```

**.output**
Komut çıktılarının ekrana (stdout) veya bir dosyaya olmasını yönetir.


- **.tables**
tablo listesi gösterir.

- **.schema**
veritabanı SQL DDL (veri tanım dili) komut listesini verir.

- **.dump** 
.schema sonucu artı INSERT betiklerini gösterir.

- **.dbconfig**

veri tabanı yapılandırmasını gösterir.

Örneğin buradaki dqs_ddl "" çift tırnak (double quotes) karakterlerinin DDL ve DML komutlarında izin verilip verilmediğini kontrol eder.
[Bakınız SQLite derleme](https://www.sqlite.org/compile.html)


- **.databases**
sqlite komut satırını kullanarak birden fazla veri tabanı dosyasına bağlanabilir.
Aşağıdaki komut ekstra bir veri tabanı dosyasına bağlanmamıza izin verir.

```sql
ATTACH DATABASE filename AS database_name;
```


Bu bağlantı sonrasında, SQL Standardı ŞEMA_ADI.NESNE_ADI isimlendirmesini kullanmamıza izin verir.

.databases komutu hangi veri tabanı dosyalarına bağlı olduğumuzu gösterir.
İlk bağlanılan dosya her zaman main şeması olarak görülür.



- **.save**
- **.backup**
Veritabanı yedeği alınmasını sağlar.
.save komutu .backup'un takma adıdır.
dosya ismi verilirken


```bash
.save yedek.sqlite
```

**.once**
Sadece bir sonraki komut çıktısını dosyaya aktarır.

Aşağıdaki komut ile veritabanının tarih ve saat ile yedeğini alıyoruz.
sqlite komut satırı parametre kavramına sahip olmadığı için .once ile çalıştırmak istediğimiz komutu bir dosyaya yazıyor.
Arkasında .read ile bu komutu çalıştırıyoruz.


```bash
.once yedekkomutu;
SELECT '.save ' || replace(file,'.sqlite',REPLACE(REPLACE(datetime('now'), ':', '-'),' ','-') || '.sqlite') FROM pragma_database_list WHERE seq = 0; 
.read yedekkomutu;
```





- **.shell**
- **.system**
çalıştırıldığu komut satırında komut çalıştırmanıza izin verir.
Örneği



```bash
.shell pwd
```
-- **CD dizinadi**

Bulunduğunuz dizini değiştirir.
Aşağıdaki komutu deneyin

```bash
.shell pwd
.cd ..
.shell pwd
```

- **.read**
SQL veya sqlite komutlarını bir dosyadan okumanızı sağlar.
Aynı zamanda komutları boru(pipe) | ile gönderebilirsiniz.

Aşağıdaki komutu deneyin

```bash
echo .dump | sqlite3 chinook.sqlite
```

